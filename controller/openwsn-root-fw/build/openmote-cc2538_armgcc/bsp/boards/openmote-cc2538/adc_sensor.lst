   1              		.syntax unified
   2              		.cpu cortex-m3
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 6
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.thumb
  14              		.syntax unified
  15              		.file	"adc_sensor.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.rodata
  20              		.align	2
  23              	rreg_uriquery:
  24 0000 683D7563 		.ascii	"h=ucb\000"
  24      6200
  25 0006 0000     		.align	2
  28              	infoBoardname:
  29 0008 43433235 		.ascii	"CC2538\000"
  29      333800
  30 000f 00       		.align	2
  33              	infouCName:
  34 0010 43433235 		.ascii	"CC2538\000"
  34      333800
  35 0017 00       		.align	2
  38              	infoRadioName:
  39 0018 43433235 		.ascii	"CC2538 SoC\000"
  39      33382053 
  39      6F4300
  40              		.text
  41              		.align	2
  42              		.global	adc_sensor_init
  43              		.thumb
  44              		.thumb_func
  46              	adc_sensor_init:
  47              	.LFB0:
  48              		.file 1 "build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c"
   1:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c **** /**
   2:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c ****    \brief Definition of the OpenMote-CC2538 ADC temperature sensor driver.
   3:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c ****    \author Nicola Accettura <nicola.accettura@eecs.berkeley.edu>, March 2015.
   4:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c **** */
   5:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c **** 
   6:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c **** #include <headers/hw_cctest.h>
   7:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c **** #include <headers/hw_rfcore_xreg.h>
   8:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c **** 
   9:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c **** #include <source/adc.h>
  10:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c **** 
  11:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c **** #include "adc_sensor.h"
  12:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c **** 
  13:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c **** //=========================== defines =========================================
  14:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c **** 
  15:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c **** #define CONST 0.58134 //(VREF / 2047) = (1190 / 2047), VREF from Datasheet
  16:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c **** #define OFFSET_DATASHEET_25C 827 // 1422*CONST, from Datasheet
  17:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c **** #define TEMP_COEFF (CONST * 4.2) // From Datasheet
  18:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c **** #define OFFSET_0C (OFFSET_DATASHEET_25C - (25 * TEMP_COEFF))
  19:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c **** 
  20:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c **** //=========================== variables =======================================
  21:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c **** 
  22:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c **** //=========================== prototype =======================================
  23:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c **** 
  24:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c **** //=========================== public ==========================================
  25:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c **** 
  26:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c **** /**
  27:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c ****    \brief Initialize the sensor
  28:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c **** */
  29:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c **** void adc_sensor_init(void) {
  49              		.loc 1 29 0
  50              		.cfi_startproc
  51              		@ args = 0, pretend = 0, frame = 0
  52              		@ frame_needed = 1, uses_anonymous_args = 0
  53 0000 80B5     		push	{r7, lr}
  54              		.cfi_def_cfa_offset 8
  55              		.cfi_offset 7, -8
  56              		.cfi_offset 14, -4
  57 0002 00AF     		add	r7, sp, #0
  58              		.cfi_def_cfa_register 7
  30:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c ****    HWREG(CCTEST_TR0) |= CCTEST_TR0_ADCTM;
  59              		.loc 1 30 0
  60 0004 084A     		ldr	r2, .L2
  61 0006 084B     		ldr	r3, .L2
  62 0008 1B68     		ldr	r3, [r3]
  63 000a 43F00203 		orr	r3, r3, #2
  64 000e 1360     		str	r3, [r2]
  31:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c ****    HWREG(RFCORE_XREG_ATEST) = 0x01;
  65              		.loc 1 31 0
  66 0010 064B     		ldr	r3, .L2+4
  67 0012 0122     		movs	r2, #1
  68 0014 1A60     		str	r2, [r3]
  32:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c ****    SOCADCSingleConfigure(SOCADC_12_BIT, SOCADC_REF_INTERNAL);
  69              		.loc 1 32 0
  70 0016 0021     		movs	r1, #0
  71 0018 3020     		movs	r0, #48
  72 001a FFF7FEFF 		bl	SOCADCSingleConfigure
  33:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c ****    adc_sens_read_temperature();
  73              		.loc 1 33 0
  74 001e FFF7FEFF 		bl	adc_sens_read_temperature
  34:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c **** }
  75              		.loc 1 34 0
  76 0022 00BF     		nop
  77 0024 80BD     		pop	{r7, pc}
  78              	.L3:
  79 0026 00BF     		.align	2
  80              	.L2:
  81 0028 34000144 		.word	1140916276
  82 002c F4860840 		.word	1074300660
  83              		.cfi_endproc
  84              	.LFE0:
  86              		.align	2
  87              		.global	adc_sens_read_temperature
  88              		.thumb
  89              		.thumb_func
  91              	adc_sens_read_temperature:
  92              	.LFB1:
  35:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c **** 
  36:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c **** /**
  37:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c ****    \brief Read rough data from sensor
  38:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c ****    \param[out] ui16Dummy rough data.
  39:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c **** */
  40:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c **** uint16_t adc_sens_read_temperature(void) {
  93              		.loc 1 40 0
  94              		.cfi_startproc
  95              		@ args = 0, pretend = 0, frame = 8
  96              		@ frame_needed = 1, uses_anonymous_args = 0
  97 0030 80B5     		push	{r7, lr}
  98              		.cfi_def_cfa_offset 8
  99              		.cfi_offset 7, -8
 100              		.cfi_offset 14, -4
 101 0032 82B0     		sub	sp, sp, #8
 102              		.cfi_def_cfa_offset 16
 103 0034 00AF     		add	r7, sp, #0
 104              		.cfi_def_cfa_register 7
  41:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c ****    uint16_t ui16Dummy;
  42:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c **** 
  43:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c ****    SOCADCSingleStart(SOCADC_TEMP_SENS);
 105              		.loc 1 43 0
 106 0036 0E20     		movs	r0, #14
 107 0038 FFF7FEFF 		bl	SOCADCSingleStart
  44:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c ****    while(!SOCADCEndOfCOnversionGet());
 108              		.loc 1 44 0
 109 003c 00BF     		nop
 110              	.L5:
 111              		.loc 1 44 0 is_stmt 0 discriminator 1
 112 003e FFF7FEFF 		bl	SOCADCEndOfCOnversionGet
 113 0042 0346     		mov	r3, r0
 114 0044 83F00103 		eor	r3, r3, #1
 115 0048 DBB2     		uxtb	r3, r3
 116 004a 002B     		cmp	r3, #0
 117 004c F7D1     		bne	.L5
  45:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c ****    ui16Dummy = SOCADCDataGet() >> SOCADC_12_BIT_RSHIFT;
 118              		.loc 1 45 0 is_stmt 1
 119 004e FFF7FEFF 		bl	SOCADCDataGet
 120 0052 0346     		mov	r3, r0
 121 0054 1B09     		lsrs	r3, r3, #4
 122 0056 FB80     		strh	r3, [r7, #6]	@ movhi
  46:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c ****    return ui16Dummy;
 123              		.loc 1 46 0
 124 0058 FB88     		ldrh	r3, [r7, #6]
  47:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c **** }
 125              		.loc 1 47 0
 126 005a 1846     		mov	r0, r3
 127 005c 0837     		adds	r7, r7, #8
 128              		.cfi_def_cfa_offset 8
 129 005e BD46     		mov	sp, r7
 130              		.cfi_def_cfa_register 13
 131              		@ sp needed
 132 0060 80BD     		pop	{r7, pc}
 133              		.cfi_endproc
 134              	.LFE1:
 136              		.global	__aeabi_i2d
 137              		.global	__aeabi_dmul
 138              		.global	__aeabi_d2f
 139              		.global	__aeabi_f2d
 140              		.global	__aeabi_dsub
 141              		.global	__aeabi_ddiv
 142 0062 00BF     		.align	2
 143              		.global	adc_sens_convert_temperature
 144              		.thumb
 145              		.thumb_func
 147              	adc_sens_convert_temperature:
 148              	.LFB2:
  48:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c **** 
  49:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c **** /**
  50:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c ****    \brief Convert rough data to human understandable
  51:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c ****    \param[in] cputemp rough data.
  52:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c ****    \param[out] the number of registered OpenSensors.
  53:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c **** */
  54:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c **** float adc_sens_convert_temperature(uint16_t cputemp) {
 149              		.loc 1 54 0
 150              		.cfi_startproc
 151              		@ args = 0, pretend = 0, frame = 16
 152              		@ frame_needed = 1, uses_anonymous_args = 0
 153 0064 90B5     		push	{r4, r7, lr}
 154              		.cfi_def_cfa_offset 12
 155              		.cfi_offset 4, -12
 156              		.cfi_offset 7, -8
 157              		.cfi_offset 14, -4
 158 0066 85B0     		sub	sp, sp, #20
 159              		.cfi_def_cfa_offset 32
 160 0068 00AF     		add	r7, sp, #0
 161              		.cfi_def_cfa_register 7
 162 006a 0346     		mov	r3, r0
 163 006c FB80     		strh	r3, [r7, #6]	@ movhi
  55:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c ****    float dOutputVoltage;
  56:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c **** 
  57:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c ****    dOutputVoltage = cputemp * CONST;
 164              		.loc 1 57 0
 165 006e FB88     		ldrh	r3, [r7, #6]
 166 0070 1846     		mov	r0, r3
 167 0072 FFF7FEFF 		bl	__aeabi_i2d
 168 0076 16A3     		adr	r3, .L9
 169 0078 D3E90023 		ldrd	r2, [r3]
 170 007c FFF7FEFF 		bl	__aeabi_dmul
 171 0080 0346     		mov	r3, r0
 172 0082 0C46     		mov	r4, r1
 173 0084 1846     		mov	r0, r3
 174 0086 2146     		mov	r1, r4
 175 0088 FFF7FEFF 		bl	__aeabi_d2f
 176 008c 0346     		mov	r3, r0
 177 008e FB60     		str	r3, [r7, #12]	@ float
  58:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c ****    dOutputVoltage = ((dOutputVoltage - OFFSET_0C) / TEMP_COEFF);
 178              		.loc 1 58 0
 179 0090 F868     		ldr	r0, [r7, #12]	@ float
 180 0092 FFF7FEFF 		bl	__aeabi_f2d
 181 0096 10A3     		adr	r3, .L9+8
 182 0098 D3E90023 		ldrd	r2, [r3]
 183 009c FFF7FEFF 		bl	__aeabi_dsub
 184 00a0 0346     		mov	r3, r0
 185 00a2 0C46     		mov	r4, r1
 186 00a4 1846     		mov	r0, r3
 187 00a6 2146     		mov	r1, r4
 188 00a8 0DA3     		adr	r3, .L9+16
 189 00aa D3E90023 		ldrd	r2, [r3]
 190 00ae FFF7FEFF 		bl	__aeabi_ddiv
 191 00b2 0346     		mov	r3, r0
 192 00b4 0C46     		mov	r4, r1
 193 00b6 1846     		mov	r0, r3
 194 00b8 2146     		mov	r1, r4
 195 00ba FFF7FEFF 		bl	__aeabi_d2f
 196 00be 0346     		mov	r3, r0
 197 00c0 FB60     		str	r3, [r7, #12]	@ float
  59:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c ****    return dOutputVoltage;
 198              		.loc 1 59 0
 199 00c2 FB68     		ldr	r3, [r7, #12]	@ float
  60:build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/adc_sensor.c **** }
 200              		.loc 1 60 0
 201 00c4 1846     		mov	r0, r3
 202 00c6 1437     		adds	r7, r7, #20
 203              		.cfi_def_cfa_offset 12
 204 00c8 BD46     		mov	sp, r7
 205              		.cfi_def_cfa_register 13
 206              		@ sp needed
 207 00ca 90BD     		pop	{r4, r7, pc}
 208              	.L10:
 209 00cc AFF30080 		.align	3
 210              	.L9:
 211 00d0 9869FB57 		.word	1476094360
 212 00d4 569AE23F 		.word	1071815254
 213 00d8 6C787AA5 		.word	2776266860
 214 00dc ACEF8740 		.word	1082650540
 215 00e0 ADFBC742 		.word	1120402349
 216 00e4 74880340 		.word	1073973364
 217              		.cfi_endproc
 218              	.LFE2:
 220              	.Letext0:
 221              		.file 2 "/usr/include/newlib/machine/_default_types.h"
 222              		.file 3 "/usr/include/newlib/sys/_stdint.h"
 223              		.file 4 "build/openmote-cc2538_armgcc/bsp/boards/openmote-cc2538/board_info.h"
DEFINED SYMBOLS
                            *ABS*:0000000000000000 adc_sensor.c
     /tmp/cc8QuuW8.s:20     .rodata:0000000000000000 $d
     /tmp/cc8QuuW8.s:23     .rodata:0000000000000000 rreg_uriquery
     /tmp/cc8QuuW8.s:28     .rodata:0000000000000008 infoBoardname
     /tmp/cc8QuuW8.s:33     .rodata:0000000000000010 infouCName
     /tmp/cc8QuuW8.s:38     .rodata:0000000000000018 infoRadioName
     /tmp/cc8QuuW8.s:41     .text:0000000000000000 $t
     /tmp/cc8QuuW8.s:46     .text:0000000000000000 adc_sensor_init
     /tmp/cc8QuuW8.s:91     .text:0000000000000030 adc_sens_read_temperature
     /tmp/cc8QuuW8.s:81     .text:0000000000000028 $d
     /tmp/cc8QuuW8.s:86     .text:0000000000000030 $t
     /tmp/cc8QuuW8.s:147    .text:0000000000000064 adc_sens_convert_temperature
     /tmp/cc8QuuW8.s:211    .text:00000000000000d0 $d
                     .debug_frame:0000000000000010 $d
                           .group:0000000000000000 wm4.0.8e445c0106ab795ab4704214cba6f089
                           .group:0000000000000000 wm4.hw_cctest.h.39.e14d1adafc571f323ab16c979c8c05d0
                           .group:0000000000000000 wm4.hw_rfcore_xreg.h.39.6b38b9cec070780b17fcef77b2e7e09d
                           .group:0000000000000000 wm4._newlib_version.h.4.ad342815780c8db09778091a421b5b5b
                           .group:0000000000000000 wm4.features.h.33.d97f2d646536517df901beeb5b9993f5
                           .group:0000000000000000 wm4._default_types.h.15.933e8edd27a65e0b69af4a865eb623d2
                           .group:0000000000000000 wm4._intsup.h.10.b82bf99f69d6a5c085fc866de0d3eb9b
                           .group:0000000000000000 wm4._stdint.h.10.7a5f60e6741af4a5594a3867d347e1f9
                           .group:0000000000000000 wm4.stdint.h.23.373a9d32a9e4c2e88fd347156532d281
                           .group:0000000000000000 wm4.stdbool.h.29.07dce69c3b78884144b7f7bd19483461
                           .group:0000000000000000 wm4.hw_types.h.67.b10589a0806dcc2d274d6fab6b736519
                           .group:0000000000000000 wm4.adc.h.62.fb7ddcf28d3300859ae98ee27dbc8abb
                           .group:0000000000000000 wm4.newlib.h.8.36dd0417407b0a085bc04c49cc2ed13a
                           .group:0000000000000000 wm4.config.h.219.65a553ab5bef5482f0d7880b0d33015e
                           .group:0000000000000000 wm4._ansi.h.23.9f8fcfa20193763fcf364fb91705c94b
                           .group:0000000000000000 wm4.stddef.h.39.a38874c8f8a57e66301090908ec2a69f
                           .group:0000000000000000 wm4.lock.h.2.9bc98482741e5e2a9450b12934a684ea
                           .group:0000000000000000 wm4._types.h.125.5cf8a495f1f7ef36777ad868a1e32068
                           .group:0000000000000000 wm4.stddef.h.161.5349cb105733e8777bfb0cf53c4e3f34
                           .group:0000000000000000 wm4._types.h.183.c226d164ceca1f2ecb9ae9360c54a098
                           .group:0000000000000000 wm4.reent.h.17.850ac0a908956e5fb788be1b80de2f32
                           .group:0000000000000000 wm4.cdefs.h.47.ba62642086d429b4f95c2381cae1c0aa
                           .group:0000000000000000 wm4.string.h.15.dab3980bf35408a4c507182805e2de3a
                           .group:0000000000000000 wm4.stddef.h.161.19e15733342b50ead2919490b095303e
                           .group:0000000000000000 wm4.interrupt.h.41.272fc4ec0e276feb439e7974d0f77eaf
                           .group:0000000000000000 wm4.board_info.h.22.1291259c351bc018e4d4402148b3c6db

UNDEFINED SYMBOLS
SOCADCSingleConfigure
SOCADCSingleStart
SOCADCEndOfCOnversionGet
SOCADCDataGet
__aeabi_i2d
__aeabi_dmul
__aeabi_d2f
__aeabi_f2d
__aeabi_dsub
__aeabi_ddiv
